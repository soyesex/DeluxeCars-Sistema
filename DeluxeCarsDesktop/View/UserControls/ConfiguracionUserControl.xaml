<UserControl x:Class="DeluxeCarsDesktop.View.UserControls.ConfiguracionUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:DeluxeCarsDesktop.View.UserControls"
             mc:Ignorable="d"
             xmlns:utils="clr-namespace:DeluxeCarsDesktop.Utils"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             d:DesignHeight="700" d:DesignWidth="1000"
             Background="Transparent"
             Foreground="{DynamicResource MaterialDesignBody}">

    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </UserControl.Resources>
    <Grid>
        <ScrollViewer VerticalScrollBarVisibility="Auto" >
            <StackPanel Margin="24">

                <!-- Tarjeta de Información de la Empresa -->
                <materialDesign:Card Padding="30" Margin="0,0,0,16" Background="{StaticResource Background.Surface.Hover}">
                    <StackPanel>
                        <TextBlock Text="Información de la Empresa" 
                                   Style="{StaticResource MaterialDesignHeadline6TextBlock}" 
                                   FontFamily="{StaticResource Font.Poppins}"
                                   Margin="0,0,0,16"/>

                        <TextBox Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                 materialDesign:HintAssist.Hint="Nombre de la Tienda"
                                 FontFamily="{StaticResource Font.Poppins}"
                                 FontSize="16"
                                 Text="{Binding NombreTienda, UpdateSourceTrigger=PropertyChanged}"/>

                        <TextBox Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                 materialDesign:HintAssist.Hint="Dirección"
                                 FontFamily="{StaticResource Font.Poppins}"
                                 Margin="0,16,0,0"
                                 FontSize="16"
                                 Text="{Binding Direccion, UpdateSourceTrigger=PropertyChanged}"/>

                        <TextBox Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                 materialDesign:HintAssist.Hint="Teléfono"
                                 FontFamily="{StaticResource Font.Poppins}"
                                 Margin="0,16,0,0"
                                 FontSize="16"
                                 Text="{Binding Telefono, UpdateSourceTrigger=PropertyChanged}"/>

                        <TextBox Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                 materialDesign:HintAssist.Hint="Email"
                                 Margin="0,16,0,0"
                                 FontSize="16"
                                 FontFamily="{StaticResource Font.Poppins}"
                                 Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"/>

                        <TextBox Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                 materialDesign:HintAssist.Hint="Horario de Atención"
                                 FontFamily="{StaticResource Font.Poppins}"
                                 Margin="0,16,0,0"
                                 FontSize="16"
                                 Text="{Binding HorarioAtencion, UpdateSourceTrigger=PropertyChanged}"/>
                    </StackPanel>
                </materialDesign:Card>

                <!-- Tarjeta de Configuración Financiera --><!--
                <materialDesign:Card Padding="16" Background="{StaticResource Brush.Brand.GrayMedium}" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="Configuración Financiera" 
                                   Style="{StaticResource MaterialDesignHeadline6TextBlock}" 
                                   FontFamily="{StaticResource Font.Poppins}"
                                   FontSize="16"
                                   Margin="0,0,0,16"/>

                        <TextBox Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                 materialDesign:HintAssist.Hint="Porcentaje de IVA"
                                 materialDesign:TextFieldAssist.SuffixText="%"
                                 FontSize="16"
                                 FontFamily="{StaticResource Font.Poppins}"
                                 Text="{Binding PorcentajeIVA, StringFormat=N2, UpdateSourceTrigger=PropertyChanged}"/>
                    </StackPanel>
                </materialDesign:Card>-->

                <!-- Tarjeta de Seguridad y Personalización -->
                <materialDesign:Card Padding="24" Margin="0,0,0,16" Background="{StaticResource Background.Surface.Hover}">
                    <StackPanel>
                        <TextBlock Text="Configuración Avanzada" 
                   Style="{StaticResource MaterialDesignHeadline5TextBlock}" 
                   FontFamily="{StaticResource Font.Poppins}"
                   Margin="0,0,0,8"/>

                        <TextBlock Text="Gestiona las credenciales de correo para notificaciones automáticas y personaliza la apariencia de la aplicación."
                   Style="{StaticResource MaterialDesignBody2TextBlock}"
                                   FontFamily="{StaticResource Font.Poppins}"
                   TextWrapping="Wrap"
                   Opacity="0.7"
                   Margin="15 5 0 0"/>

                        <Separator Style="{StaticResource MaterialDesignDarkSeparator}" Margin="0,10,0,10"/>

                        <TextBlock Text="Conectividad de Correo Electrónico" 
                   Style="{StaticResource MaterialDesignHeadline6TextBlock}" 
                   FontFamily="{StaticResource Font.Poppins}"
                   Margin="0,0,0,8"/>

                        <TextBox Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                 materialDesign:HintAssist.Hint="Correo Emisor (ej: notificaciones@tuempresa.com)" Margin="15 5 0 0"
                                 FontFamily="{StaticResource Font.Poppins}" FontSize="16"
                 Text="{Binding EmailEmisor, UpdateSourceTrigger=PropertyChanged}"/>

                        <PasswordBox x:Name="SmtpPasswordBox"
                     Style="{StaticResource MaterialDesignFloatingHintPasswordBox}"
                                     FontFamily="{StaticResource Font.Poppins}" Margin="15 25 0 0" FontSize="16"
                     materialDesign:HintAssist.Hint="Contraseña de Aplicación"
                     utils:PasswordBoxHelper.BoundPassword="{Binding SmtpPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

                        <TextBlock Text="* Usa una Contraseña de Aplicación generada desde Gmail/Outlook, no tu contraseña personal."
                                   FontFamily="{StaticResource Font.Poppins}"
                   Style="{StaticResource MaterialDesignCaptionTextBlock}" Margin="15 5 0 0"
                   FontStyle="Italic"
                   Opacity="0.7"/>

                        <Expander Header="Usar configuración manual (para servidores privados)" Foreground="White"
                                  IsExpanded="{Binding IsManualConfigChecked}" Background="{StaticResource Background.Surface}"
                                  Style="{StaticResource MaterialDesignExpander}" FontFamily="{StaticResource Font.Poppins}" FontSize="14"
                                  Margin="15 25 0 0">
                            <StackPanel Margin="24,16,24,16">
                                <TextBox Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                         materialDesign:HintAssist.Hint="Servidor SMTP (Host)" FontFamily="{StaticResource Font.Poppins}" FontSize="14"
                                         materialDesign:HintAssist.HelperText="*Para Gmail: smtp.gmail.com | Outlook: smtp.office365.com"
                                         Text="{Binding SmtpHost, UpdateSourceTrigger=PropertyChanged}"/>

                                <Grid Margin="0,16,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBox Grid.Column="0" Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                             materialDesign:HintAssist.Hint="Puerto" FontFamily="{StaticResource Font.Poppins}" FontSize="14"
                                             Margin="0,15,8,0"
                                             Text="{Binding SmtpPort, UpdateSourceTrigger=PropertyChanged}"/>

                                    <CheckBox Grid.Column="1" Content="Habilitar SSL" 
                                              IsChecked="{Binding EnableSsl}" FontFamily="{StaticResource Font.Poppins}" FontSize="14"
                                              VerticalAlignment="Bottom" 
                                              Margin="8,10,0,8"/>
                                </Grid>
                            </StackPanel>
                        </Expander>

                        <Separator Style="{StaticResource MaterialDesignDarkSeparator}" Margin="0,10,0,10"/>

                        <TextBlock Text="Seguridad y Personalización" 
                   Style="{StaticResource MaterialDesignHeadline6TextBlock}" 
                   FontFamily="{StaticResource Font.Poppins}"
                   Margin="0,0,0,16"/>

                        <StackPanel Orientation="Horizontal">
                            <Button Style="{StaticResource MaterialDesignOutlinedButton}" FontFamily="{StaticResource Font.Poppins}"
                    Command="{Binding CambiarPinCommand}" 
                    Margin="0,0,16,0">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="KeyVariant" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="Cambiar PIN"/>
                                </StackPanel>
                            </Button>

                            <Button Style="{StaticResource MaterialDesignOutlinedButton}" FontFamily="{StaticResource Font.Poppins}"
                    Command="{Binding CambiarLogoCommand}"
                    Margin="0,0,16,0">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="Image" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="Cambiar Logo"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </StackPanel>
                </materialDesign:Card>

            </StackPanel>
        </ScrollViewer>

        <!-- Botón Flotante para Guardar Cambios -->
        <Button Style="{StaticResource MaterialDesignFloatingActionButton}"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Margin="32"
                Background="{StaticResource Action.Primary.Hover}"
                ToolTip="Guardar Cambios"
                Command="{Binding GuardarCambiosCommand}">
            <materialDesign:PackIcon Kind="ContentSave" Height="24" Width="24" />
        </Button>
    </Grid>
</UserControl>
