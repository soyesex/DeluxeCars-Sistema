<Window x:Class="DeluxeCarsDesktop.View.PasswordRecoveryView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:DeluxeCarsDesktop.View"
        mc:Ignorable="d"
        xmlns:fa="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"
        Title="Recuperación de Contraseña"
        xmlns:customcontrols="clr-namespace:DeluxeCarsDesktop.CustomControls"
        xmlns:helpers="clr-namespace:DeluxeCarsDesktop.Utils"
        WindowStyle="None"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterScreen"
        Background="Transparent"
        AllowsTransparency="True" 
        MouseDown="Window_MouseDown" Height="550" Width="800">

    <Border CornerRadius="15">
        <Border.Background>
            <ImageBrush ImageSource="C:\Users\suare\Source\Repos\DeluxeCarsUI\DeluxeCarsDesktop\Images\register.jpg" Stretch="UniformToFill"/>
        </Border.Background>

        <Border CornerRadius="12" BorderThickness="2">
            <Border.BorderBrush>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="{StaticResource Color.Aggressive.DeepBlue}" Offset="0"/>
                    <GradientStop Color="{StaticResource Color.Aggressive.RacingRed}" Offset="0.5"/>
                    <GradientStop Color="{StaticResource Color.Aggressive.DeepBlue}" Offset="1"/>
                </LinearGradientBrush>
            </Border.BorderBrush>

            <Border.Background>
                <LinearGradientBrush StartPoint="0,1" EndPoint="1,0" Opacity="0.85">
                    <GradientStop Color="{StaticResource Color.PrimaryBack1}" Offset="0"/>
                    <GradientStop Color="{StaticResource Color.PrimaryBack2}" Offset="0.65"/>
                </LinearGradientBrush>
            </Border.Background>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="30"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0"
                            Orientation="Horizontal"
                            FlowDirection="RightToLeft"
                            Background="Transparent"
                            Margin="0,0,5,0"
                            MouseDown="pnlControlBar_MouseLeftButtonDown">
                    <Button x:Name="btnClose" Style="{StaticResource controlButton}" Tag="{StaticResource color4}" Click="btnClose_Click">
                        <fa:IconImage Icon="Xmark" Style="{StaticResource controlButtonIcon}"/>
                    </Button>
                    <Button x:Name="btnMinimize" Style="{StaticResource controlButton}" Tag="{StaticResource color6}" Click="btnMinimize_Click">
                        <fa:IconImage Icon="WindowMinimize" Width="12" Style="{StaticResource controlButtonIcon}"/>
                    </Button>
                </StackPanel>


                <Grid Grid.Row="1" Margin="40, 10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="Recuperar Contraseña"   
                               Style="{StaticResource H1TextStyle}" 
                               HorizontalAlignment="Center"
                               Margin="0,20,0,20"/>

                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                        <StackPanel VerticalAlignment="Center">

                            <StackPanel>
                                <StackPanel.Style>
                                    <Style TargetType="StackPanel">
                                        <Setter Property="Visibility" Value="Visible"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsResetStage}" Value="True">
                                                <Setter Property="Visibility" Value="Collapsed"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </StackPanel.Style>

                                <TextBlock Text="Correo electrónico" Style="{StaticResource SecondaryTextStyle}" Margin="0,15,0,5"/>
                                <TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource DarkInputControlStyle}"/>

                                <Button Content="Solicitar Token" Command="{Binding RequestTokenCommand}" Style="{StaticResource DarkActionButtonStyle}" Margin="0,25,0,0"/>
                            </StackPanel>

                            <StackPanel>
                                <StackPanel.Style>
                                    <Style TargetType="StackPanel">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsResetStage}" Value="True">
                                                <Setter Property="Visibility" Value="Visible"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </StackPanel.Style>

                                <TextBlock Text="Token de Recuperación:" Style="{StaticResource SecondaryTextStyle}" Margin="0,15,0,5"/>
                                <TextBox Text="{Binding Token, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource DarkInputControlStyle}"/>

                                <TextBlock Text="Nueva Contraseña:" Style="{StaticResource SecondaryTextStyle}" Margin="0,15,0,5"/>
                                <customcontrols:BindablePasswordBox Password="{Binding NewPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

                                <TextBlock Text="Confirmar Nueva Contraseña:" Style="{StaticResource SecondaryTextStyle}" Margin="0,10,0,5"/>
                                <customcontrols:BindablePasswordBox Password="{Binding ConfirmPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

                                <Button Content="Restablecer Contraseña" Command="{Binding ResetPasswordCommand}" Style="{StaticResource DarkActionButtonStyle}" Margin="0,25,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>

                    <TextBox Grid.Row="2" Text="{Binding StatusMessage, Mode=OneWay}" TextWrapping="Wrap" IsReadOnly="True"
                             Background="Transparent" BorderThickness="0" Foreground="{StaticResource titleColor2}"
                             FontWeight="Medium" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="10"/>
                </Grid>
            </Grid>
        </Border>
    </Border>
</Window>
