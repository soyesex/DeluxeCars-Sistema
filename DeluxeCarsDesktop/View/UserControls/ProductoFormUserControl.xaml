<UserControl x:Class="DeluxeCarsDesktop.View.UserControls.ProductoFormUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:DeluxeCarsDesktop.View.UserControls"
             mc:Ignorable="d"  xmlns:fa="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"
             xmlns:converters="clr-namespace:DeluxeCarsDesktop.Converters"
             xmlns:behaviors="clr-namespace:DeluxeCarsDesktop.Behaviors"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             d:DesignHeight="700" d:DesignWidth="900">

    <UserControl.Resources>
        <converters:ImagePathConverter x:Key="ImagePathConverter"/>
    </UserControl.Resources>
    <Grid Margin="5">

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>


        <Border Grid.Column="0" 
                Background="{DynamicResource Brush.Brand.CharcoalDark}"
                CornerRadius="10"
                Padding="25"
                Margin="0,0,15,20">
            <StackPanel VerticalAlignment="Center">
                <Border BorderBrush="{StaticResource PrimaryBorderColor}" BorderThickness="1" 
                        CornerRadius="8" Width="220" Height="220">
                    <Image Source="{Binding ImagenUrl, Converter={StaticResource ImagePathConverter}}" Stretch="Uniform"/>
                </Border>
                <Button Content="Seleccionar Imagen..."
                        Command="{Binding SeleccionarImagenCommand}"
                        Style="{StaticResource ElegantShadowGhostButton}"
                        Tag="{StaticResource Brush.Menu.BlueSteel}"
                        Width="200"
                        Height="60"
                        Margin="0,30,0,40"/>
                <Button Command="{Binding EliminarImagenCommand}"
                        Style="{StaticResource MaterialDesignToolButton}"
                        ToolTip="Eliminar Imagen"
                        HorizontalAlignment="Center" Margin="0,10,0,0">
                    <fa:IconImage Icon="TrashCan" Foreground="{StaticResource Brush.Accent.DestructiveRed}"/>
                </Button>
            </StackPanel>
        </Border>

        <Grid Grid.Column="1" Margin="15,0,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <!-- Fila para los campos del formulario -->
                <RowDefinition Height="Auto"/>
                <!-- Fila para los botones de acción -->
            </Grid.RowDefinitions>

            <!-- Contenedor principal para las dos columnas de campos -->
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="340"/>
                    <ColumnDefinition Width="360"/>
                </Grid.ColumnDefinitions>

                <!-- === COLUMNA 1 === -->
                <StackPanel Grid.Column="0" Margin="0,0,17,0">
                    <Label Content="Nombre del Producto:" Style="{StaticResource DarkLableForm}"/>
                    <TextBox Style="{StaticResource ElegantTextBoxStyle}"
                             Text="{Binding Nombre, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"/>

                    <Label Content="OEM / Referencia:" Style="{StaticResource DarkLableForm}" Margin="0,15,0,0"/>
                    <TextBox Style="{StaticResource ElegantTextBoxStyle}"
                             Text="{Binding OEM, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"/>

                    <Label Content="Categoría:" Style="{StaticResource DarkLableForm}" Margin="0,15,0,0"/>
                    <ComboBox Style="{StaticResource ElegantComboBoxStyle}"
                              ItemsSource="{Binding Categorias}" 
                              SelectedItem="{Binding CategoriaSeleccionada}"
                              DisplayMemberPath="Nombre"/>

                    <Label Content="Precio de Venta:" Style="{StaticResource DarkLableForm}" Margin="0,15,0,0"/>
                    <TextBox Style="{StaticResource ElegantTextBoxStyle}"
                             Text="{Binding Precio, UpdateSourceTrigger=PropertyChanged, StringFormat=N0, ValidatesOnDataErrors=True}"
                             behaviors:InputBehaviors.SoloNumeros="True"/>

                    <Label Content="Stock Mínimo:" Style="{StaticResource DarkLableForm}" Margin="0,15,0,0"/>
                    <TextBox Style="{StaticResource ElegantTextBoxStyle}"
                             Text="{Binding StockMinimo, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                             behaviors:InputBehaviors.SoloNumeros="True"/>
                </StackPanel>

                <!-- === COLUMNA 2 === -->
                <StackPanel Grid.Column="1" Margin="15,0,0,0">
                    <Label Content="Unidad de Medida (Ej: Unidad, Juego):" Style="{StaticResource DarkLableForm}"/>
                    <TextBox Style="{StaticResource ElegantTextBoxStyle}"
                             Text="{Binding UnidadMedida, UpdateSourceTrigger=PropertyChanged}"/>

                    <Label Content="Stock Máximo:" Style="{StaticResource DarkLableForm}" Margin="0,15,0,0"/>
                    <TextBox Style="{StaticResource ElegantTextBoxStyle}"
                             Text="{Binding StockMaximo, UpdateSourceTrigger=PropertyChanged}"
                             behaviors:InputBehaviors.SoloNumeros="True"/>

                    <Label Content="Descripción:" Style="{StaticResource DarkLableForm}" Margin="0,15,0,0"/>
                    <TextBox Style="{StaticResource ElegantTextBoxStyle}"
                             Text="{Binding Descripcion, UpdateSourceTrigger=PropertyChanged}"
                             Height="138" TextWrapping="Wrap" AcceptsReturn="True" VerticalContentAlignment="Top" Padding="10,8"/>

                    <CheckBox IsChecked="{Binding Estado}"
                              Content="Producto Activo"
                              FontSize="16"
                              FontFamily="{StaticResource Font.Poppins}"
                              Style="{StaticResource MaterialDesignCheckBox}"
                              Margin="5,20,0,0"
                              Foreground="White"/>
                </StackPanel>
            </Grid>

            <!-- Botones de Acción en la parte inferior -->
            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,10,0">
                <Button Content="Cancelar" Command="{Binding CancelarCommand}" Style="{StaticResource ElegantShadowGhostButton}" Tag="Gray" IsCancel="True" Margin="0,0,15,0"/>
                <Button Content="Guardar" Command="{Binding GuardarCommand}" IsDefault="True" Style="{StaticResource ElegantShadowGhostButton}" Tag="{StaticResource Brush.Menu.GreenForest}"/>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>